<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="utf-8">
            <title>HEBitmap C Docs</title>
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <link rel="stylesheet" href="style.css">
        </head>
        <body><div class="container"><h1>HEBitmap C Docs</h1><section><h2>‚öôÔ∏è Initialization</h2><div class="definition"><div class="definition-title">void he_library_init(PlaydateAPI *pd, int enableLua);</div><div class="definition-description">Initialize the library. Pass 1 as the second parameter to enable Lua support.</div></div></section><section><h2>‚öôÔ∏è Macros</h2><div class="note">Macros are in the <span class="inline-quote">he_api.h</span> header. You can edit them in the header, or add them as preprocessor macros.</div><div class="definition"><div class="definition-title">#define HE_LUA_BINDINGS 1</div><div class="definition-description">Set to 1 or 0 to compile/not compile the Lua bindings (default value is 1).</div></div><div class="definition"><div class="definition-title">#define HE_SPRITE_MODULE 1</div><div class="definition-description">Set to 1 or 0 to compile/not compile the sprite system (default value is 1).</div></div><div class="definition"><div class="definition-title">#define HE_GFX_STACK_SIZE 1024</div><div class="definition-description">Set the graphics stack size (default value is 1024).</div></div></section><section><h2>üé® Graphics</h2><div class="definition"><div class="definition-title">void he_graphics_setClipRect(int x, int y, int width, int height);</div><div class="definition-description">Set the clip rect.</div></div><div class="definition"><div class="definition-title">void he_graphics_clearClipRect(void);</div><div class="definition-description">Clear the clip rect.</div></div><div class="definition"><div class="definition-title">void he_graphics_pushContext(void);</div><div class="definition-description">Push the graphics context.</div></div><div class="definition"><div class="definition-title">void he_graphics_popContext(void);</div><div class="definition-description">Pop the graphics context.</div></div></section><section><h2>üñºÔ∏è Bitmap</h2><div class="definition"><div class="definition-title">HEBitmap* HEBitmap_load(const char *filename);</div><div class="definition-description">Loads a new HEBitmap from a Playdate image file (similar to playdate->graphics->loadBitmap).</div></div><div class="definition"><div class="definition-title">HEBitmap* HEBitmap_loadHEB(const char *filename);</div><div class="definition-description">Loads a new HEBitmap from a .heb file (use the Python encoder to create it). Heb files are faster to load but larger on disk compared to the Playdate image format.</div></div><div class="definition"><div class="definition-title">HEBitmap* HEBitmap_fromLCDBitmap(LCDBitmap *lcd_bitmap);</div><div class="definition-description">Create a HEBitmap from a LCDBitmap.</div></div><div class="definition"><div class="definition-title">void HEBitmap_draw(HEBitmap *bitmap, int x, int y);</div><div class="definition-description">Draws the bitmap at the given position.</div></div><div class="definition"><div class="definition-title">int width;</div><div class="definition-description">Bitmap width (HEBitmap struct)</div></div><div class="definition"><div class="definition-title">int height;</div><div class="definition-description">Bitmap height (HEBitmap struct)</div></div><div class="definition"><div class="definition-title">LCDColor HEBitmap_colorAt(HEBitmap *bitmap, int x, int y);</div><div class="definition-description">Gets the color at the given position, it returns an LCDColor.</div></div><div class="definition"><div class="definition-title">void HEBitmap_getData(HEBitmap *bitmap, uint8_t **data, uint8_t **mask, int *rowbytes, int *bx, int *by, int *bw, int *bh);</div><div class="definition-description">Gets the bitmap data, mask, rowbytes and bounds (surrounding transparent pixels are trimmed).</div></div><div class="definition"><div class="definition-title">void HEBitmap_free(HEBitmap *bitmap);</div><div class="definition-description">Frees the bitmap.</div></div></section><section><h2>üñºÔ∏è Bitmap Table</h2><div class="definition"><div class="definition-title">HEBitmapTable* HEBitmapTable_load(const char *filename);</div><div class="definition-description">Loads a new HEBitmap from a Playdate image table file (similar to playdate->graphics->loadBitmapTable).</div></div><div class="definition"><div class="definition-title">HEBitmapTable* HEBitmapTable_loadHEBT(const char *filename);</div><div class="definition-description">Loads a new HEBitmapTable from a .hebt file (use the Python encoder to create it).</div></div><div class="definition"><div class="definition-title">HEBitmap* HEBitmap_atIndex(HEBitmapTable *bitmapTable, unsigned int index);</div><div class="definition-description">Gets the bitmap at the given index in a table.</div></div><div class="definition"><div class="definition-title">unsigned int length;</div><div class="definition-description">Table length (HEBitmapTable struct)</div></div><div class="definition"><div class="definition-title">void HEBitmapTable_free(HEBitmapTable *bitmapTable);</div><div class="definition-description">Frees the bitmap table.</div></div></section><section><h2>üëæ Sprite system</h2><div class="note">The sprite system allows to efficiently move, check collisions and draw sprites.</div><div class="note">It's optional. If you don't want to include it, open <span class="inline-quote">he_api.h</span> and set <span class="inline-quote">#define HE_SPRITE_MODULE 0</span>. You can then remove <span class="inline-quote">he_sprite.h/c</span> from your project.</div></section><section><h2>Sprite basics</h2><div class="definition"><div class="definition-title">HESprite* HESprite_new(void);</div><div class="definition-description">Creates a new sprite.</div></div><div class="definition"><div class="definition-title">void HESprite_add(HESprite *sprite);</div><div class="definition-description">Adds the sprite to the system. This is required.</div></div><div class="definition"><div class="definition-title">void HESprite_setBitmap(HESprite *sprite, HEBitmap *bitmap);</div><div class="definition-description">Sets a bitmap for the sprite.</div></div><div class="definition"><div class="definition-title">void HESprite_setPosition(HESprite *sprite, float x, float y);</div><div class="definition-description">Sets the sprite position ignoring collisions.</div></div><div class="definition"><div class="definition-title">void HESprite_moveTo(HESprite *sprite, float x, float y);</div><div class="definition-description">Moves the sprite.</div></div><div class="definition"><div class="definition-title">void HESprite_setCenter(HESprite *sprite, float cx, float cy);</div><div class="definition-description">Sets the sprite center as a fraction in the range 0.0 - 1.0.</div></div><div class="definition"><div class="definition-title">void HESprite_setZIndex(HESprite *sprite, int z);</div><div class="definition-description">Sets the z-index for the sprite. Default value is 0.</div></div><div class="definition"><div class="definition-title">HEVec2 HESprite_getPosition(HESprite *sprite);</div><div class="definition-description">Gets the sprite position.</div></div><div class="definition"><div class="definition-title">void HESprite_getSize(HESprite *sprite, int *width, int *height);</div><div class="definition-description">Gets the sprite size.</div></div><div class="definition"><div class="definition-title">void HESprite_remove(HESprite *sprite);</div><div class="definition-description">Removes the sprite from the system.<br>Removing a sprite could be slow. If you plan to reuse it, consider hiding your sprite instead.</div></div></section><section><h2>Functions</h2><div class="definition"><div class="definition-title">void he_sprites_move(float deltaTime);</div><div class="definition-description">Call this function to move the sprites and check the collisions. Pass a delta time as the first parameter.</div></div><div class="definition"><div class="definition-title">void he_sprites_update(void);</div><div class="definition-description">Call this function to determine the visible sprites.</div></div><div class="definition"><div class="definition-title">void he_sprites_draw(void);</div><div class="definition-description">Call this function to draw the sprites. You are responsible to clear the screen before drawing.</div></div><div class="definition"><div class="definition-title">void he_sprites_resizeGrid(float x, float y, float width, float height, float cellSize);</div><div class="definition-description">A grid-based partioning system is used to determine collisions and visibility. Call this method to resize the grid and adapt it to your game. Resizing the grid could be slow, consider calling it before adding the sprites.<br><br>The default rect is (0, 0, display_width, display_height) with cellSize = 64.</div></div><div class="definition"><div class="definition-title">HESprite** he_sprites_getAll(int *len);</div><div class="definition-description">Gets all the sprites. You shouldn't free the returned array.</div></div><div class="definition"><div class="definition-title">void he_sprites_removeAll(void);</div><div class="definition-description">Removes all the sprites.</div></div><div class="definition"><div class="definition-title">void he_sprites_setDrawOffset(int dx, int dy);</div><div class="definition-description">Set the draw offset, this is the same as moving a camera in a world (e.g. a player moving horizontally in a platform game).</div></div><div class="definition"><div class="definition-title">void HESprite_setScreenClipRect(int x, int y, int width, int height);</div><div class="definition-description">Set a screen clip rect.</div></div></section></section><section><h2>Sprite full docs</h2><div class="definition"><div class="definition-title">void HESprite_setTileBitmap(HESprite *sprite, HEBitmap *bitmap);</div><div class="definition-description">Sets a bitmap to be used as a tile (repeated bitmap).</div></div><div class="definition"><div class="definition-title">void HESprite_setTileOffset(HESprite *sprite, int dx, int dy);</div><div class="definition-description">Sets the tile offset. For example, you can use it to scroll a repeated background.</div></div><div class="definition"><div class="definition-title">void HESprite_setDrawCallback(HESprite *sprite, HESpriteDrawCallback *callback);</div><div class="definition-description">Sets a draw callback to customize the drawing. Drawing coordinates are relative to the sprite. Remember to set a size for the sprite to use it.<pre class="code">typedef void(HESpriteDrawCallback)(HESprite *sprite, HERect rect);</pre></div></div><div class="definition"><div class="definition-title">void HESprite_setEmpty(HESprite *sprite);</div><div class="definition-description">Sets a sprite as empty. This is the default state when a new sprite is created and not configured.</div></div><div class="definition"><div class="definition-title">void HESprite_setSize(HESprite *sprite, float width, float height);</div><div class="definition-description">Sets the size for the sprite. This method has no effect if a bitmap is set.</div></div><div class="definition"><div class="definition-title">int HESprite_isVisible(HESprite *sprite);</div><div class="definition-description">Gets the sprite visibility.</div></div><div class="definition"><div class="definition-title">int HESprite_isVisibleOnScreen(HESprite *sprite);</div><div class="definition-description">Returns true if the sprite is currently visible on screen. It should be called after he_sprites_update()</div></div><div class="definition"><div class="definition-title">void HESprite_setClipRect(HESprite *sprite, int x, int y, int width, int height);</div><div class="definition-description">Sets a clip rect for the sprite.</div></div><div class="definition"><div class="definition-title">void HESprite_setClipRectReference(HESprite *sprite, HESpriteClipRectReference reference);</div><div class="definition-description">Set the reference used to calculate the clip rect (relative or absolute). Default value is <i>relative</i> which means that the clip rect is in local coordinates. If you set <i>absolute</i>, the clip rect is in screen coordinates.<pre class="code">typedef enum {
	HESpriteClipRectRelative,
	HESpriteClipRectAbsolute
} HESpriteClipRectReference;</pre></div></div><div class="definition"><div class="definition-title">void HESprite_clearClipRect(HESprite *sprite);</div><div class="definition-description">Clears the clip rect for the sprite.</div></div><div class="definition"><div class="definition-title">void HESprite_setIgnoresDrawOffset(HESprite *sprite, int flag);</div><div class="definition-description">Call this method to ignore the draw offset. Useful for UI elements or a background sprite at a fixed position.</div></div><div class="definition"><div class="definition-title">void HESprite_setIgnoresScreenClipRect(HESprite *sprite, int flag);</div><div class="definition-description">Call this method to ignore the screen clip rect.</div></div><div class="definition"><div class="definition-title">void HESprite_setUserdata(HESprite *sprite, void *userdata);</div><div class="definition-description">Sets the userdata for the sprite.</div></div><div class="definition"><div class="definition-title">void* HESprite_getUserdata(HESprite *sprite);</div><div class="definition-description">Gets the userdata for the sprite.</div></div><div class="definition"><div class="definition-title">void HESprite_setUpdateCallback(HESprite *sprite, HESpriteUpdateCallback *callback);</div><div class="definition-description">Set an update callback for the sprite. The update callback is called only when the sprite is visible on screen.<pre class="code">typedef void(HESpriteUpdateCallback)(HESprite *sprite);</pre></div></div></section><section><h2>üí• Collisions</h2><div class="definition"><div class="definition-title">void HESprite_setCollisionsEnabled(HESprite *sprite, int flag);</div><div class="definition-description">Enable or disable the collisions for the sprite. By default, collisions are not enabled.</div></div><div class="definition"><div class="definition-title">void HESprite_setCollisionType(HESprite *sprite, HESpriteCollisionType type);</div><div class="definition-description">Set the collision type.<br>For the best performance, set <i>HESpriteCollisionTypeIgnore</i> if you don't need collisions detection from this sprite.</div></div><div class="definition"><div class="definition-title">void HESprite_setCollisionTypeCallback(HESprite *sprite, HESpriteCollisionTypeCallback *callback);</div><div class="definition-description">Set the collision type as a callback.<pre class="code">typedef HESpriteCollisionType(HESpriteCollisionTypeCallback)(HESprite *sprite, HESprite *other);</pre>For the best performance, return <i>HESpriteCollisionTypeIgnore</i> if you don't need collisions detection for a specific pair.</div></div><div class="indent"><section><h2>Types</h2><div class="definition"><div class="definition-title">HESpriteCollisionTypeSlide</div><div class="definition-description">Set slide if you want the sprite to slide over other sprites.</div></div><div class="definition"><div class="definition-title">HESpriteCollisionTypeFreeze</div><div class="definition-description">Set freeze if you want the sprite to stop when touches other sprites.</div></div><div class="definition"><div class="definition-title">HESpriteCollisionTypeOverlap</div><div class="definition-description">Set overlap if you want to get notified when the sprite collides with other sprites.</div></div><div class="definition"><div class="definition-title">HESpriteCollisionTypeBounce</div><div class="definition-description">Set bounce if you want the sprite to bounce touching other sprites.</div></div><div class="definition"><div class="definition-title">HESpriteCollisionTypeIgnore</div><div class="definition-description">Set ignore if you want to ignore the collision early and skip other calculations (good for performance).</div></div></section></div><div class="definition"><div class="definition-title">HESpriteCollisionType HESprite_getCollisionType(HESprite *sprite, int *isCallback);</div><div class="definition-description">Gets the collision type.</div></div><div class="definition"><div class="definition-title">void HESprite_invalidateCollisionType(HESprite *sprite);</div><div class="definition-description">It invalidates the cached collision type (only if you use a callback).</div></div><div class="definition"><div class="definition-title">void HESprite_cacheCollisionType(HESprite *sprite, int flag);</div><div class="definition-description">Enable or disable the cache for the collision type callback. In C, the cache is disabled by default.</div></div><div class="definition"><div class="definition-title">int HESprite_collisionTypeIsBeingCached(HESprite *sprite);</div><div class="definition-description">Returns true if the cache is enabled for the collision type callback.</div></div><div class="definition"><div class="definition-title">void HESprite_setFastCollisions(HESprite *sprite, int flag);</div><div class="definition-description">Enable or disable fast collisions for the sprite. If enabled, detection will be faster but tunnelling won't be supported.</div></div><div class="definition"><div class="definition-title">HESpriteCollision* he_sprites_getCollisions(int *len);</div><div class="definition-description">Get the collisions occurred in the latest move call. You shouldn't free the returned array.</div></div><div class="indent"><section><h2>Collision</h2><div class="definition"><div class="definition-title">HESpriteCollision</div><div class="definition-description"><pre class="code">typedef struct HESpriteCollision {
	HESpriteCollisionType type;
	HESprite *sprite;
	HESprite *otherSprite;
	HEVec2 normal;
	HEVec2 touch;
	HEVec2 goal;
	HERectF rect;
	HERectF otherRect;
} HESpriteCollision</pre></div></div><div class="definition"><div class="definition-title">HESpriteCollisionType type</div><div class="definition-description">Collision type.</div></div><div class="definition"><div class="definition-title">HESprite *sprite</div><div class="definition-description">Sprite being moved.</div></div><div class="definition"><div class="definition-title">HESprite *otherSprite</div><div class="definition-description">Other sprite.</div></div><div class="definition"><div class="definition-title">HEVec2 normal</div><div class="definition-description">Normal. Allowed values are: -1, 0, 1. You can use it to determine which side collided with the other sprite. For nx, -1 is the left side, 1 is the right side. For ny, 1 is the bottom side, -1 is the top side.</div></div><div class="definition"><div class="definition-title">HEVec2 touch</div><div class="definition-description">Sprite position where it started touching other.</div></div><div class="definition"><div class="definition-title">HEVec2 goal</div><div class="definition-description">Goal position for the sprite.</div></div><div class="definition"><div class="definition-title">HERectF rect</div><div class="definition-description">Sprite rect where it started touching other.</div></div><div class="definition"><div class="definition-title">HERectF otherRect</div><div class="definition-description">Other sprite rect where it started touching sprite.</div></div></section></div><div class="definition"><div class="definition-title">HESpriteCollision* HESprite_checkCollisions(HESprite *sprite, int *len);</div><div class="definition-description">Returns an array of collisions like <i>he_sprites_getCollisions</i> but without moving the sprite. You are responsible to free the array (check if array is NULL first).</div></div><div class="definition"><div class="definition-title">HESprite** he_sprites_queryWithRect(float x, float y, float width, float height, int *len);</div><div class="definition-description">Returns all the sprites (with collisions enabled) in the given rect. You are responsible to free the array (check if array is NULL first).</div></div><div class="definition"><div class="definition-title">HESprite** he_sprites_queryWithSegment(float x1, float y1, float x2, float y2, int *len);</div><div class="definition-description">Returns all the sprites (with collisions enabled) intersecting the given segment. You are responsible to free the array (check if array is NULL first).</div></div><div class="definition"><div class="definition-title">HESprite** he_sprites_queryWithPoint(float x, float y, int *len);</div><div class="definition-description">Returns all the sprites (with collisions enabled) containing the given point. You are responsible to free the array (check if array is NULL first).</div></div></section><section><h2>‚û°Ô∏è Animation</h2><div class="definition"><div class="definition-title">void HESprite_setFollowTarget(HESprite *sprite, HESprite *target);</div><div class="definition-description">Sets a target to follow. Pass NULL to unfollow the current target.</div></div><div class="definition"><div class="definition-title">void HESprite_setFollowVelocity(HESprite *sprite, float velocity);</div><div class="definition-description">Sets the velocity with which the target is followed (pixel per second).</div></div><div class="definition"><div class="definition-title">void HESprite_setFollowOffset(HESprite *sprite, float dx, float dy);</div><div class="definition-description">Sets an offset for the target position. Offset is calculated from the center of the sprite.</div></div><div class="definition"><div class="definition-title">void HESprite_setFollowRefreshRate(HESprite *sprite, float rate);</div><div class="definition-description">Sets a refresh rate in order to update the target position at regular intervals (sprite movement will be delayed).</div></div></section></div></body></html>